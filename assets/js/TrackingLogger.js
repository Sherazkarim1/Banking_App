!function(){function e(e){this._url="/wtr/t/",this._dataLayer=null,this._hostname=e,this._protokoll="https:"}var a="data-dataLayer";e.prototype.filterJSessionId=function(e){return e.replace(/;jsessionid=\w*/g,"")},e.prototype.skipQueryString=function(a){var t=e.prototype.filterJSessionId(a),r=t.indexOf("?");return r>-1&&(t=t.substr(0,r)),t},e.prototype.log=function(e){if("undefined"!=typeof window.cmp&&window.cmp.consentGiven()||document.body.hasAttribute("data-wtr")){var a="";for(var t in e)e.hasOwnProperty(t)&&(a+="&"+t+"="+encodeURIComponent(e[t]));a="?"+a.substr(1);var r=new Image;r.src=this.getTrackingUrl()+a+"&pageContextId="+window.cdb.tracking.pageContextId}},e.prototype.getTrackingUrl=function(){return void 0!==this._hostname&&""!==this._hostname?this._protokoll+"//"+this._hostname+this._url:this._protokoll+"//"+location.hostname+this._url},e.prototype.seitenLogging=function(a,t){e.prototype.generatePageContextId(!0);var r={};if(void 0!==a)var o={sSearchTerm:a.sSearchTerm,sf:a.sf,term:a.term};else var o={sSearchTerm:"",sf:"",term:""};void 0!==t&&null!=t&&(this._dataLayer=t),this.readDataLayer()&&(void 0!==this._dataLayer.page.id&&(r.pageName=this._dataLayer.page.id),void 0!==this._dataLayer.page.cDes?r.cDes=this._dataLayer.page.cDes:r.cDes=document.title,void 0!==this._dataLayer.page.pI&&(r.pI=this._dataLayer.page.pI),void 0!==this._dataLayer.page.tI&&(r.tI=this._dataLayer.page.tI),void 0!==this._dataLayer.page.additionalParams&&(r.additionalParams=this._dataLayer.page.additionalParams));var i=this.getCookie("AdvertisingId");if(i){var n=i.split("#");r.ad=n[0]}return this.ecrmLogging(r.pageName,r.cDes,r.ad,r.pI,r.bp,o.sSearchTerm,o.sf,o.term,r.tI,r.additionalParams)},e.prototype.ecrmLogging=function(t,r,o,i,n,d,p,s,c,g){e.prototype.generatePageContextId(!0);var h=this.baseLogging();if(null!=this._dataLayer&&this._dataLayer.page&&this._dataLayer.page.events&&(h.events="",h.events=this.addEvent(this._dataLayer.page.events,h.events)),h.pageName=t,void 0!=o&&""!=o&&(h.v0=o),void 0!=r&&""!=r?h.prop2=r:h.prop2=document.title,void 0!=i&&""!=i&&(h.prop30=i),void 0!=n&&""!=n&&n!=t&&(h.eVar20=n),void 0!==c&&""!==c&&(h.prop48=c),void 0!=d&&""!=d&&(h.prop15=d,h.prop16="wertpapiersuche",h.prop18="comdirect_informer"),location.href.indexOf("suche?q=")>-1||location.pathname.indexOf("/faq/")>-1){if(void 0!==s&&""!==s)h.prop15=s;else{var y=location.pathname;h.prop15=y.replace("/faq/","")}h.prop16="volltextsuche";var l=new URLSearchParams(location.search),u=l.get("from");u?h.prop18=u:h.prop18="comdirect",null!=this._dataLayer&&this._dataLayer.page&&this._dataLayer.page.searchResults?h.eVar43=this._dataLayer.page.searchResults:h.eVar43=0}if(null!==this._dataLayer&&this._dataLayer.page&&this._dataLayer.page.products&&(h.products=this._dataLayer.page.products),g)h.additionalParams=JSON.stringify(g);else{var m={},w=document.querySelector("["+a+"]");if(w){var v=decodeURIComponent(w.getAttribute(a));v&&(m=JSON.parse(v),void 0!==m.page.additionalParams&&(h.additionalParams=JSON.stringify(m.page.additionalParams)))}}return this.log(h),window.cdb.tracking.vtr=1,h},e.prototype.actionLogging=function(e,a,t,r,o,i,n){var d=this.baseLogging();return d.events=a,null!=this._dataLayer&&this._dataLayer.page&&this._dataLayer.page.id&&(d.eVar20=this._dataLayer.page.id),d.pe="o",t&&(0==t.indexOf("/")&&(t=location.protocol+"//"+location.host+t),"javascript://"===t&&(t=location.protocol+"//"+location.host+location.pathname),d.pev1=this.filterJSessionId(t)),d.pev2=e,window.eCrm&&window.eCrm.getParam().ad&&(d.prop23=window.eCrm.getParam().ad),r?d.prop2=r:window.eCrm&&window.eCrm.getParam().cDes&&(d.prop2=window.eCrm.getParam().cDes),d.actionTracking=!0,n&&(d.additionalParams=JSON.stringify(n)),void 0!=o&&""!=o&&(d.prop30=o),void 0!==i&&""!==i&&(d.prop48=i),this.log(d),d},e.prototype.addEvent=function(e,a){return""==a?e:a+","+e},e.prototype.baseLogging=function(){var e={};if(this.readDataLayer()){for(prop in this._dataLayer.page)(0===prop.indexOf("prop")||0===prop.indexOf("eVar"))&&(e[prop]=this._dataLayer.page[prop]);e.prop5=this._dataLayer.page.status,this._dataLayer.page.pageHierarchy&&(e.hier1=this._dataLayer.page.pageHierarchy.replace(/\//g,"|"))}e.k=navigator.cookieEnabled,e.bh=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e.bw=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.s=screen.width+"x"+screen.height,e.v=navigator.javaEnabled()?"Y":"N",e.r=this.skipQueryString(document.referrer),e.g=this.filterJSessionId(document.location.href),e.t=Math.round((new Date).getTime()),e.c=screen.colorDepth;var a=new Date;e.timezone=a.getTimezoneOffset(),e.prop10=a.getHours();var t=a.getDay();switch(t){case 1:e.prop11="monday",e.prop12="weekday";break;case 2:e.prop11="tuesday",e.prop12="weekday";break;case 3:e.prop11="wednesday",e.prop12="weekday";break;case 4:e.prop11="thursday",e.prop12="weekday";break;case 5:e.prop11="friday",e.prop12="weekday";break;case 6:e.prop11="saturday",e.prop12="weekend";break;default:e.prop11="sunday",e.prop12="weekend"}var r="1.2",o=new Date;if(o.getFullYear&&(r="1.3",.2.toFixed()&&(r="1.5",o=[],o.forEach))){r="1.6";try{[].reduceRight&&(r="1.8","a".trim&&(r="1.8.1",Object.isFrozen&&(r="1.8.5")))}catch(i){}}return e.j=r,e},e.prototype.readDataLayer=function(){var e=!1;if(void 0!==this._dataLayer&&null!=this._dataLayer)e=!0;else{var t=document.querySelector("["+a+"]");if(t){var r=decodeURIComponent(t.getAttribute(a));r&&(this._dataLayer=JSON.parse(r),e=!0)}}return e},e.prototype.getCookie=function(e){return window.cdb.tracking.CookieHandler.cookie(e)},e.prototype.generatePageContextId=function(e){if(!window.cdb.tracking.pageContextId||e&&window.cdb.tracking.vtr>0){var a=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(a+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==e?t:3&t|8).toString(16)});window.cdb.tracking.pageContextId=t}},window.cdb=window.cdb||{},window.cdb.tracking=window.cdb.tracking||{},window.cdb.tracking.TrackingLogger=e,window.cdb.tracking.TrackingLogger.prototype.generatePageContextId(),window.cdb.tracking.vtr=0}();