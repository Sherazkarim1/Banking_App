!function(){function e(){this._url="/cp/log/kpi"}function n(){}e.prototype.log=function(e,n){var t=JSON.stringify(n),o=JSON.parse(document.querySelector("body").dataset.datalayer);if(o&&o.page){var r=o.page.id;(new Image).src=this._url+"?type="+encodeURIComponent(e)+"&url="+encodeURIComponent(document.location.href)+"&user_agent="+encodeURIComponent(navigator.userAgent)+"&value="+encodeURIComponent(t)+"&cori="+encodeURIComponent(r)}},n._getData=function(){var e=performance.getEntriesByType("navigation");if(e&&e.length){for(var n=e[0].toJSON(),t=this.getPerformanceObjectKeys(n),o={},r=0,a=t.length;a>r;r++){var i=n[t[r]];i&&!isNaN(i)&&(o[t[r]]={time:Math.round(i)})}return o}},n.measureClientPerformance=function(){var e=this._getData();if(e){for(var n={},t=0,o=this.eventsOrder.length;o>t;t++){var r=this.eventsOrder[t];e.hasOwnProperty(r)&&(n[r]=e[r].time)}return n}},n.getPerformanceObjectKeys=function(e){var n=Object.keys(e);return n.length?n:Object.keys(Object.getPrototypeOf(e))},n.eventsOrder=["responseStart","domContentLoadedEventEnd","domInteractive","loadEventEnd"],document.addEventListener("DOMContentLoaded",function(t){var o=n.measureClientPerformance();o&&(new e).log("ClientPerformance",o),window.cdb=window.cdb||{},window.cdb.kpi=window.cdb.kpi||{},window.cdb.kpi.KPILogger=e,window.cdb.kpi.PerformanceProfiler=n})}();